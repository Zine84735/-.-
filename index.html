!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ú–µ–¥–≤–µ–Ω—Å–∫–∏–π —Ä–∞–π–æ–Ω ¬∑ –ù–∞—Ä–æ–¥–Ω—ã–π –≥–∏–¥</title>
    <!-- Font Awesome 6 -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <!-- –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ —à—Ä–∏—Ñ—Ç—ã -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&family=Manrope:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: #f5f3f0;
            background-image: 
                radial-gradient(circle at 0% 0%, rgba(190, 170, 140, 0.08) 0%, transparent 50%),
                radial-gradient(circle at 100% 100%, rgba(130, 110, 80, 0.05) 0%, transparent 50%);
            font-family: 'Inter', sans-serif;
            color: #1e1e1e;
            line-height: 1.6;
            padding: 30px 20px;
        }

        .page-wrapper {
            max-width: 1400px;
            margin: 0 auto;
        }

        /* ----- –®–ê–ü–ö–ê ----- */
        .modern-header {
            background: linear-gradient(145deg, #17303a 0%, #1f454a 100%);
            border-radius: 48px;
            padding: 60px 50px;
            margin-bottom: 50px;
            color: white;
            box-shadow: 0 25px 40px rgba(20, 40, 35, 0.2);
            position: relative;
            overflow: hidden;
        }

        .modern-header::after {
            content: "–ú–ï–î–í–ï–ù–°–ö–ò–ô –†–ê–ô–û–ù";
            position: absolute;
            bottom: -30px;
            right: 30px;
            font-size: 120px;
            font-weight: 800;
            color: rgba(255, 255, 255, 0.04);
            letter-spacing: 15px;
            font-family: 'Manrope', sans-serif;
            pointer-events: none;
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 40px;
            position: relative;
            z-index: 2;
        }

        .header-title h1 {
            font-size: 72px;
            font-weight: 800;
            letter-spacing: -2px;
            line-height: 1;
            margin-bottom: 10px;
            font-family: 'Manrope', sans-serif;
            background: linear-gradient(to right, #ffffff, #d4e3e0);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .header-title p {
            font-size: 22px;
            opacity: 0.9;
            font-weight: 300;
            max-width: 700px;
        }

        .header-stats {
            background: rgba(255,255,255,0.08);
            backdrop-filter: blur(10px);
            padding: 25px 40px;
            border-radius: 80px;
            border: 1px solid rgba(255,255,255,0.2);
            display: flex;
            gap: 50px;
        }

        .stat-item {
            text-align: center;
        }

        .stat-number {
            font-size: 40px;
            font-weight: 800;
            display: block;
            line-height: 1;
        }

        .stat-label {
            font-size: 15px;
            text-transform: uppercase;
            letter-spacing: 3px;
            opacity: 0.8;
        }

        /* ----- –ó–ê–ì–û–õ–û–í–ö–ò ----- */
        .section-title {
            font-size: 34px;
            font-weight: 700;
            margin-bottom: 30px;
            display: flex;
            align-items: center;
            gap: 15px;
            color: #17303a;
            font-family: 'Manrope', sans-serif;
        }

        .section-title i {
            color: #2e6368;
            font-size: 34px;
        }

        /* ----- –ö–ê–†–¢–û–ß–ö–ò –ú–ï–°–¢ (–ü–û–°–Å–õ–ö–ò + –£–ß–†–ï–ñ–î–ï–ù–ò–Ø) ----- */
        .places-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 30px;
            margin-bottom: 60px;
        }

        .place-card {
            background: white;
            border-radius: 32px;
            padding: 32px;
            box-shadow: 0 5px 25px rgba(0,0,0,0.02);
            transition: 0.2s;
            border: 1px solid rgba(0,0,0,0.03);
            display: flex;
            flex-direction: column;
        }

        .place-card:hover {
            transform: translateY(-6px);
            box-shadow: 0 30px 40px rgba(47, 79, 79, 0.06);
            border-color: #b7afa3;
        }

        .place-icon {
            font-size: 48px;
            margin-bottom: 18px;
            color: #1f454a;
        }

        .place-name {
            font-size: 28px;
            font-weight: 700;
            margin-bottom: 10px;
            font-family: 'Manrope', sans-serif;
            color: #1d2f2f;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .place-rating {
            display: flex;
            align-items: center;
            gap: 8px;
            background: #f4f1ec;
            padding: 8px 18px;
            border-radius: 60px;
            font-size: 18px;
            font-weight: 600;
        }

        .place-rating i {
            color: #ffb700;
        }

        .place-desc {
            color: #5f5f5f;
            margin-bottom: 20px;
            font-size: 17px;
            flex-grow: 1;
        }

        .place-tags {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
            margin-bottom: 25px;
        }

        .tag {
            background: #eef3f2;
            padding: 6px 18px;
            border-radius: 60px;
            font-size: 14px;
            font-weight: 600;
            color: #1f454a;
        }

        .place-actions {
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-top: 1px solid #ececec;
            padding-top: 22px;
        }

        .rating-buttons {
            display: flex;
            gap: 18px;
        }

        .rate-btn {
            background: none;
            border: none;
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 20px;
            font-weight: 600;
            color: #4a4a4a;
            padding: 8px 20px;
            border-radius: 60px;
            background: #f5f5f5;
            cursor: pointer;
            transition: 0.1s;
        }

        .rate-btn i {
            font-size: 22px;
        }

        .rate-btn.like:hover {
            background: #e3f2e3;
            color: #2e7d32;
        }

        .rate-btn.dislike:hover {
            background: #ffebee;
            color: #c62828;
        }

        .review-count {
            color: #6f6f6f;
            font-size: 16px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        /* ----- –§–û–†–ú–ê –î–û–ë–ê–í–õ–ï–ù–ò–Ø ----- */
        .story-form-section {
            background: white;
            border-radius: 48px;
            padding: 50px 50px;
            margin-bottom: 60px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.04);
            border: 1px solid #e8ddd2;
        }

        .form-title {
            font-size: 36px;
            font-weight: 800;
            margin-bottom: 30px;
            color: #17303a;
            font-family: 'Manrope', sans-serif;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        /* –û–ì–†–û–ú–ù–û–ï –ü–û–õ–ï –ò–ú–ï–ù–ò */
        .giant-name-field {
            margin-bottom: 30px;
            text-align: center;
        }

        .giant-name-field label {
            display: block;
            font-size: 20px;
            font-weight: 700;
            margin-bottom: 12px;
            color: #1f454a;
            letter-spacing: 1px;
        }

        .giant-name-field input {
            width: 100%;
            padding: 24px 30px;
            font-size: 28px;
            background: #faf9f7;
            border: 3px solid #dad1c5;
            border-radius: 80px;
            font-weight: 600;
            font-family: 'Manrope', sans-serif;
            transition: 0.2s;
            text-align: center;
            letter-spacing: 1px;
        }

        .giant-name-field input:focus {
            border-color: #1f454a;
            background: white;
            box-shadow: 0 0 0 6px rgba(31, 69, 74, 0.08);
            outline: none;
        }

        .form-grid-2col {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 25px;
        }

        @media (max-width: 800px) {
            .form-grid-2col { grid-template-columns: 1fr; }
        }

        .form-group {
            margin-bottom: 5px;
        }

        .form-group label {
            display: block;
            font-weight: 600;
            margin-bottom: 10px;
            color: #2e4a4a;
            font-size: 17px;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 18px 22px;
            background: #faf9f7;
            border: 2px solid #e2dbd1;
            border-radius: 30px;
            font-size: 17px;
            transition: 0.15s;
            font-family: 'Inter', sans-serif;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            border-color: #1f454a;
            outline: none;
            background: white;
            box-shadow: 0 0 0 4px rgba(31,69,74,0.08);
        }

        .form-group textarea {
            resize: vertical;
            min-height: 150px;
        }

        /* –ó–ê–ì–†–£–ó–ö–ê –§–û–¢–û */
        .photo-upload {
            grid-column: span 2;
            background: #f8f5f0;
            border-radius: 40px;
            padding: 25px 30px;
            border: 2px dashed #bba88c;
            text-align: center;
        }

        .photo-upload label {
            font-weight: 700;
            color: #1f454a;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            font-size: 20px;
            margin-bottom: 10px;
        }

        #imageInput {
            font-size: 18px;
            padding: 15px;
            width: 100%;
            background: white;
            border-radius: 60px;
            border: 1px solid #c0afa0;
        }

        .btn-modern {
            background: #1f454a;
            border: none;
            color: white;
            padding: 22px 50px;
            border-radius: 80px;
            font-size: 24px;
            font-weight: 700;
            cursor: pointer;
            transition: 0.15s;
            display: inline-flex;
            align-items: center;
            gap: 15px;
            border-bottom: 5px solid #0e2c30;
            margin-top: 25px;
            font-family: 'Manrope', sans-serif;
            width: 100%;
            justify-content: center;
        }

        .btn-modern:hover {
            background: #2d6368;
            border-bottom-width: 3px;
            transform: translateY(2px);
        }

        .btn-modern i {
            font-size: 28px;
        }

        /* ----- –õ–ï–ù–¢–ê –ü–û–°–¢–û–í ----- */
        .feed-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .feed-header h2 {
            font-size: 38px;
            font-weight: 800;
            color: #17303a;
            font-family: 'Manrope', sans-serif;
        }

        .filter-tabs {
            display: flex;
            gap: 12px;
            background: white;
            padding: 8px;
            border-radius: 80px;
            border: 1px solid #dbcfc2;
        }

        .filter-btn {
            padding: 12px 28px;
            border-radius: 80px;
            border: none;
            background: transparent;
            font-weight: 600;
            color: #4a4a4a;
            cursor: pointer;
            font-size: 16px;
        }

        .filter-btn.active {
            background: #1f454a;
            color: white;
        }

        .posts-feed {
            display: flex;
            flex-direction: column;
            gap: 35px;
            margin-bottom: 50px;
        }

        .feed-item {
            background: white;
            border-radius: 40px;
            padding: 35px 45px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.02);
            border-left: 16px solid #2e6368;
            transition: 0.1s;
            border: 1px solid #f0e7de;
            border-left-width: 16px;
        }

        .item-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .item-author {
            display: flex;
            align-items: center;
            gap: 15px;
            font-weight: 800;
            font-size: 24px;
            color: #1d2f2f;
        }

        .item-author i {
            background: #1f454a;
            color: white;
            padding: 10px;
            border-radius: 50%;
            font-size: 20px;
        }

        .item-place-badge {
            background: #e8efef;
            padding: 8px 24px;
            border-radius: 60px;
            font-size: 17px;
            font-weight: 600;
            color: #1f454a;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .item-type {
            padding: 8px 20px;
            border-radius: 60px;
            font-size: 15px;
            font-weight: 600;
            background: #f0ebe5;
            color: #4a4a4a;
        }

        .item-content {
            font-size: 19px;
            line-height: 1.7;
            margin: 25px 0 20px;
            color: #2e2e2e;
        }

        .post-image {
            margin: 25px 0 15px;
            border-radius: 28px;
            overflow: hidden;
            max-width: 100%;
            border: 2px solid #ebe2d6;
            box-shadow: 0 10px 20px rgba(0,0,0,0.03);
        }

        .post-image img {
            width: 100%;
            max-height: 450px;
            object-fit: cover;
            display: block;
        }

        .item-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 25px;
            border-top: 1px solid #ececec;
            padding-top: 25px;
        }

        .post-reactions {
            display: flex;
            gap: 30px;
        }

        .reaction-btn {
            background: none;
            border: none;
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 22px;
            font-weight: 600;
            color: #555;
            background: #f4f4f4;
            padding: 10px 25px;
            border-radius: 60px;
            cursor: pointer;
            transition: 0.1s;
        }

        .reaction-btn i {
            font-size: 24px;
        }

        .reaction-btn:hover {
            background: #e9e9e9;
        }

        .item-date {
            color: #888;
            font-size: 17px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .empty-feed {
            background: white;
            padding: 80px;
            text-align: center;
            border-radius: 60px;
            color: #7a7a7a;
            font-size: 24px;
            border: 2px dashed #bba88c;
        }

        @media (max-width: 700px) {
            .modern-header { padding: 40px 25px; }
            .header-title h1 { font-size: 48px; }
            .giant-name-field input { font-size: 22px; padding: 18px; }
            .feed-item { padding: 25px; }
        }
    </style>
</head>
<body>
    <div class="page-wrapper">

        <!-- –®–ê–ü–ö–ê -->
        <div class="modern-header">
            <div class="header-content">
                <div class="header-title">
                    <h1>–ú–µ–¥–≤–µ–Ω—Å–∫–∏–π —Ä–∞–π–æ–Ω</h1>
                    <p><i class="fas fa-location-dot"></i> –ü–∞–Ω–∏–∫–∏, –ê–º–æ—Å–æ–≤–∫–∞, –ú–µ–¥–≤–µ–Ω–∫–∞ –∏ –≤—Å—è –æ–∫—Ä—É–≥–∞</p>
                </div>
                <div class="header-stats">
                    <div class="stat-item">
                        <span class="stat-number" id="totalStoriesCount">0</span>
                        <span class="stat-label">–ò—Å—Ç–æ—Ä–∏–π</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-number" id="totalPlacesCount">10</span>
                        <span class="stat-label">–°—ë–ª –∏ –º–µ—Å—Ç</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-number" id="totalReviewsCount">0</span>
                        <span class="stat-label">–û—Ç–∑—ã–≤–æ–≤</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- –ö–ê–†–¢–û–ß–ö–ò –ú–ï–°–¢ (–ú–ï–î–í–ï–ù–ö–ê + –°–Å–õ–ê –†–ê–ô–û–ù–ê) -->
        <div class="section-title">
            <i class="fas fa-map-pin"></i> –°—ë–ª–∞ –∏ –º–µ—Å—Ç–∞ –ú–µ–¥–≤–µ–Ω—Å–∫–æ–≥–æ —Ä–∞–π–æ–Ω–∞
        </div>
        <div class="places-grid" id="placesGrid"></div>

        <!-- ========= –§–û–†–ú–ê –î–û–ë–ê–í–õ–ï–ù–ò–Ø ========= -->
        <div class="story-form-section">
            <div class="form-title">
                <i class="fas fa-feather-alt"></i> –û—Å—Ç–∞–≤–∏—Ç—å –æ—Ç–∑—ã–≤ –∏–ª–∏ –∏—Å—Ç–æ—Ä–∏—é
            </div>
            
            <!-- –û–ì–†–û–ú–ù–û–ï –ü–û–õ–ï –ò–ú–ï–ù–ò -->
            <div class="giant-name-field">
                <label><i class="fas fa-user-circle"></i> –í–ê–®–ï –ò–ú–Ø</label>
                <input type="text" id="authorName" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –ê–ù–ù–ê, –ò–ó –ü–ê–ù–ò–ö–û–í" value="–ú–ï–î–í–ï–ù–ï–¶">
            </div>

            <div class="form-grid-2col">
                <!-- –í–´–ë–û–† –ú–ï–°–¢–ê –ò–ó –°–ü–ò–°–ö–ê (–¢–ï–ü–ï–†–¨ –ï–°–¢–¨ –°–Å–õ–ê) -->
                <div class="form-group">
                    <label><i class="fas fa-building"></i> –í—ã–±–µ—Ä–∏—Ç–µ —Å–µ–ª–æ / –º–µ—Å—Ç–æ</label>
                    <select id="placeSelect"></select>
                    <p style="font-size: 14px; color: #777; margin-top: 8px;">–ü–∞–Ω–∏–∫–∏, –ê–º–æ—Å–æ–≤–∫–∞, –ú–µ–¥–≤–µ–Ω–∫–∞...</p>
                </div>

                <!-- –ò–õ–ò –°–í–û–Å –ú–ï–°–¢–û -->
                <div class="form-group">
                    <label><i class="fas fa-pencil-alt"></i> –ò–ª–∏ —É–∫–∞–∂–∏—Ç–µ —Å–≤–æ—ë</label>
                    <input type="text" id="customPlaceInput" placeholder="–Ω–∞–ø—Ä–∏–º–µ—Ä: —Ñ–µ—Ä–º–∞, –æ—Å—Ç–∞–Ω–æ–≤–∫–∞, —Ä–µ–∫–∞">
                </div>
            </div>

            <!-- –¢–ò–ü –ü–û–°–¢–ê -->
            <div style="margin-bottom: 25px; background: #f4f2ef; padding: 20px; border-radius: 40px;">
                <label style="font-weight: 700; color: #1f454a; display: block; margin-bottom: 15px; font-size: 18px;"><i class="fas fa-tag"></i> –¢–∏–ø –∑–∞–ø–∏—Å–∏</label>
                <div style="display: flex; gap: 30px; flex-wrap: wrap;">
                    <label style="display: flex; align-items: center; gap: 12px; font-size: 18px;">
                        <input type="radio" name="postType" value="story" checked> üìñ –ò—Å—Ç–æ—Ä–∏—è / –≤–æ—Å–ø–æ–º–∏–Ω–∞–Ω–∏–µ
                    </label>
                    <label style="display: flex; align-items: center; gap: 12px; font-size: 18px;">
                        <input type="radio" name="postType" value="review"> üí¨ –û—Ç–∑—ã–≤ / —á—Ç–æ –Ω–µ –Ω—Ä–∞–≤–∏—Ç—Å—è
                    </label>
                </div>
            </div>

            <!-- –¢–ï–ö–°–¢ –ü–û–°–¢–ê -->
            <div class="form-group">
                <label><i class="fas fa-align-left"></i> –í–∞—à —Ä–∞—Å—Å–∫–∞–∑, –æ—Ç–∑—ã–≤, –≤–ø–µ—á–∞—Ç–ª–µ–Ω–∏–µ</label>
                <textarea id="postContent" placeholder="–ù–∞–ø–∏—à–∏—Ç–µ, —á—Ç–æ –≤–∞–º –Ω—Ä–∞–≤–∏—Ç—Å—è –∏–ª–∏ –Ω–µ –Ω—Ä–∞–≤–∏—Ç—Å—è –≤ –ú–µ–¥–≤–µ–Ω—Å–∫–æ–º —Ä–∞–π–æ–Ω–µ, –≤—Å–ø–æ–º–Ω–∏—Ç–µ –∏–Ω—Ç–µ—Ä–µ—Å–Ω—É—é –∏—Å—Ç–æ—Ä–∏—é..."></textarea>
            </div>

            <!-- –ó–ê–ì–†–£–ó–ö–ê –§–û–¢–û -->
            <div class="photo-upload">
                <label for="imageInput"><i class="fas fa-camera"></i> –ü—Ä–∏–∫—Ä–µ–ø–∏—Ç—å —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—é</label>
                <input type="file" id="imageInput" accept="image/*">
                <p style="margin-top: 12px; color: #666; font-size: 15px;">–ú–∞–∫—Å–∏–º—É–º 5 –ú–ë. –§–æ—Ç–æ –ø–æ—è–≤–∏—Ç—Å—è –≤ –ø–æ—Å—Ç–µ.</p>
            </div>

            <!-- –ö–ù–û–ü–ö–ê -->
            <button class="btn-modern" id="publishBtn">
                <i class="fas fa-paper-plane"></i> –û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å
            </button>
        </div>

        <!-- –õ–ï–ù–¢–ê –ü–û–°–¢–û–í -->
        <div class="feed-header">
            <h2><i class="fas fa-stream"></i> –õ–µ–Ω—Ç–∞ –ú–µ–¥–≤–µ–Ω—Å–∫–æ–≥–æ —Ä–∞–π–æ–Ω–∞</h2>
            <div class="filter-tabs">
                <button class="filter-btn active" data-filter="all">–í—Å–µ</button>
                <button class="filter-btn" data-filter="story">üìñ –ò—Å—Ç–æ—Ä–∏–∏</button>
                <button class="filter-btn" data-filter="review">üí¨ –û—Ç–∑—ã–≤—ã</button>
            </div>
        </div>

        <div id="postsFeed" class="posts-feed"></div>

        <div style="text-align: center; margin: 70px 0 40px; color: #5e5e5e;">
            <i class="fas fa-heart" style="color: #a6584b;"></i> –ú–µ–¥–≤–µ–Ω—Å–∫–∏–π —Ä–∞–π–æ–Ω ‚Äî –∑–µ–º–ª—è –∏—Å—Ç–æ—Ä–∏–π
        </div>
    </div>

    <script>
        (function() {
            "use strict";

            // ---------- –ú–ï–°–¢–ê –ú–ï–î–í–ï–ù–°–ö–û–ì–û –†–ê–ô–û–ù–ê (–î–û–ë–ê–í–õ–ï–ù–´ –ü–ê–ù–ò–ö–ò, –ê–ú–û–°–û–í–ö–ê –ò –î–†.) ----------
            const PLACES = [
                // –ü–æ—Å—ë–ª–æ–∫ –ú–µ–¥–≤–µ–Ω–∫–∞
                { id: 'medvenka', name: '–ú–µ–¥–≤–µ–Ω–∫–∞ (–ø–æ—Å—ë–ª–æ–∫)', icon: 'fas fa-town', desc: '–¶–µ–Ω—Ç—Ä —Ä–∞–π–æ–Ω–∞', tags: ['–ü–æ—Å—ë–ª–æ–∫', '–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ü–∏—è'] },
                { id: 'dk', name: '–î–æ–º –∫—É–ª—å—Ç—É—Ä—ã (–ú–µ–¥–≤–µ–Ω–∫–∞)', icon: 'fas fa-theater-masks', desc: '–¶–µ–Ω—Ç—Ä –∫—É–ª—å—Ç—É—Ä–Ω–æ–π –∂–∏–∑–Ω–∏', tags: ['–ö—É–ª—å—Ç—É—Ä–∞'] },
                { id: 'school', name: '–®–∫–æ–ª–∞ (–ú–µ–¥–≤–µ–Ω–∫–∞)', icon: 'fas fa-school', desc: '–°—Ä–µ–¥–Ω—è—è —à–∫–æ–ª–∞', tags: ['–û–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ'] },
                { id: 'dussh', name: '–î–Æ–°–® (–ú–µ–¥–≤–µ–Ω–∫–∞)', icon: 'fas fa-futbol', desc: '–°–ø–æ—Ä—Ç–∏–≤–Ω–∞—è —à–∫–æ–ª–∞', tags: ['–°–ø–æ—Ä—Ç'] },
                { id: 'cafe', name: '–ö–∞—Ñ–µ –ì—Ä–∞—Ü–∏—è (–ú–µ–¥–≤–µ–Ω–∫–∞)', icon: 'fas fa-utensils', desc: '–ï–≤—Ä–æ–ø–µ–π—Å–∫–∞—è –∫—É—Ö–Ω—è', tags: ['–ï–¥–∞'] },
                { id: 'hospital', name: '–ë–æ–ª—å–Ω–∏—Ü–∞ (–ú–µ–¥–≤–µ–Ω–∫–∞)', icon: 'fas fa-hospital', desc: '–¶–†–ë', tags: ['–ú–µ–¥–∏—Ü–∏–Ω–∞'] },
                { id: 'park', name: '–ü–∞—Ä–∫ 1 –ú–∞—è (–ú–µ–¥–≤–µ–Ω–∫–∞)', icon: 'fas fa-tree', desc: '–¶–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π –ø–∞—Ä–∫', tags: ['–û—Ç–¥—ã—Ö'] },
                
                // –°—ë–ª–∞ –ú–µ–¥–≤–µ–Ω—Å–∫–æ–≥–æ —Ä–∞–π–æ–Ω–∞
                { id: 'paniki', name: '–ü–∞–Ω–∏–∫–∏', icon: 'fas fa-village', desc: '–°–µ–ª–æ, –∏–∑–≤–µ—Å—Ç–Ω–æ–µ —Å XVIII –≤–µ–∫–∞', tags: ['–°–µ–ª–æ', '–ò—Å—Ç–æ—Ä–∏—è'] },
                { id: 'amosovka', name: '–ê–º–æ—Å–æ–≤–∫–∞', icon: 'fas fa-village', desc: '–ù–∞—Å–µ–ª—ë–Ω–Ω—ã–π –ø—É–Ω–∫—Ç', tags: ['–°–µ–ª–æ'] },
                { id: 'spasskoe', name: '–°–ø–∞—Å—Å–∫–æ–µ', icon: 'fas fa-church', desc: '–°–µ–ª–æ —Å —Ö—Ä–∞–º–æ–º', tags: ['–°–µ–ª–æ', '–¶–µ—Ä–∫–æ–≤—å'] },
                { id: 'vyshneye', name: '–í—ã—à–Ω–µ–µ –î–æ–ª–≥–æ–µ', icon: 'fas fa-village', desc: '–°–µ–ª–æ', tags: ['–°–µ–ª–æ'] },
                { id: 'nizhneye', name: '–ù–∏–∂–Ω–µ–µ –î–æ–ª–≥–æ–µ', icon: 'fas fa-village', desc: '–°–µ–ª–æ', tags: ['–°–µ–ª–æ'] },
                { id: 'gostomlya', name: '–ì–æ—Å—Ç–æ–º–ª—è', icon: 'fas fa-water', desc: '–°–µ–ª–æ —É —Ä–µ–∫–∏', tags: ['–°–µ–ª–æ', '–ü—Ä–∏—Ä–æ–¥–∞'] }
            ];

            const STORAGE_KEY = 'medvensky_raion_places_v2';

            let posts = [];
            let placeRatings = {};

            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ä–µ–π—Ç–∏–Ω–≥–æ–≤
            function initPlaceRatings() {
                PLACES.forEach(p => { placeRatings[p.id] = { likes: 0, dislikes: 0 }; });
            }

            // –ó–∞–≥—Ä—É–∑–∫–∞
            function loadData() {
                const stored = localStorage.getItem(STORAGE_KEY);
                if (stored) {
                    try {
                        const data = JSON.parse(stored);
                        posts = data.posts || [];
                        placeRatings = data.placeRatings || {};
                    } catch(e) { resetDefault(); }
                } else { resetDefault(); }
                
                // –î–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤—ã–µ –º–µ—Å—Ç–∞, –µ—Å–ª–∏ –∏—Ö –Ω–µ—Ç –≤ —Ä–µ–π—Ç–∏–Ω–≥–∞—Ö
                PLACES.forEach(place => { 
                    if (!placeRatings[place.id]) placeRatings[place.id] = { likes: 0, dislikes: 0 }; 
                });
            }

            function resetDefault() {
                posts = [
                    { id: 'p1', author: '–ê–ù–ù–ê', placeId: 'paniki', customPlace: '', type: 'story', content: '–í –ü–∞–Ω–∏–∫–∞—Ö –∂–∏–ª–∞ –º–æ—è –±–∞–±—É—à–∫–∞. –ü–æ–º–Ω—é, –∫–∞–∫ –ø–∞—Ö–ª–æ —Å–≤–µ–∂–∏–º —Ö–ª–µ–±–æ–º –∏–∑ –ø–µ—á–∏...', date: '12 —Ñ–µ–≤ 2026', likes: 8, dislikes: 0, image: null },
                    { id: 'p2', author: '–°–ï–†–ì–ï–ô', placeId: 'amosovka', customPlace: '', type: 'review', content: '–ê–º–æ—Å–æ–≤–∫–∞ ‚Äî —Ç–∏—Ö–æ–µ –º–µ—Å—Ç–æ, –Ω–æ –¥–æ—Ä–æ–≥–∏ —Ä–∞–∑–±–∏—Ç—ã —Å–æ–≤—Å–µ–º. –•–æ—Ç–µ–ª–æ—Å—å –±—ã —Ä–µ–º–æ–Ω—Ç–∞.', date: '10 —Ñ–µ–≤ 2026', likes: 12, dislikes: 2, image: null },
                    { id: 'p3', author: '–î–ú–ò–¢–†–ò–ô', placeId: 'cafe', customPlace: '', type: 'review', content: '–ö–∞—Ñ–µ –ì—Ä–∞—Ü–∏—è: –¥–µ—Å–µ—Ä—Ç—ã –≤–∫—É—Å–Ω—ã–µ, –Ω–æ –¥–æ–ª–≥–æ –∂–¥–∞—Ç—å.', date: '5 —Ñ–µ–≤ 2026', likes: 8, dislikes: 3, image: null },
                    { id: 'p4', author: '–ï–õ–ï–ù–ê', placeId: 'dussh', customPlace: '', type: 'story', content: '–°—ã–Ω —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∞–ª—Å—è –≤ –î–Æ–°–® ‚Äî –æ—Ç–ª–∏—á–Ω—ã–µ —Ç—Ä–µ–Ω–µ—Ä—ã!', date: '1 —Ñ–µ–≤ 2026', likes: 24, dislikes: 0, image: null },
                    { id: 'p5', author: '–°–¢–ê–†–û–ñ–ò–õ', placeId: 'spasskoe', customPlace: '', type: 'story', content: '–í –°–ø–∞—Å—Å–∫–æ–º —Ö—Ä–∞–º –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç. –î—É—à–∞ —Ä–∞–¥—É–µ—Ç—Å—è.', date: '28 —è–Ω–≤ 2026', likes: 15, dislikes: 1, image: null }
                ];
                initPlaceRatings();
                placeRatings = {
                    medvenka: { likes: 25, dislikes: 3 },
                    dk: { likes: 7, dislikes: 2 }, 
                    school: { likes: 15, dislikes: 1 }, 
                    dussh: { likes: 21, dislikes: 0 },
                    cafe: { likes: 18, dislikes: 5 }, 
                    hospital: { likes: 6, dislikes: 8 }, 
                    park: { likes: 32, dislikes: 1 },
                    paniki: { likes: 14, dislikes: 0 },
                    amosovka: { likes: 9, dislikes: 3 },
                    spasskoe: { likes: 11, dislikes: 0 },
                    vyshneye: { likes: 4, dislikes: 1 },
                    nizhneye: { likes: 3, dislikes: 0 },
                    gostomlya: { likes: 7, dislikes: 1 }
                };
                saveData();
            }

            function saveData() {
                localStorage.setItem(STORAGE_KEY, JSON.stringify({ posts, placeRatings }));
            }

            // –≠–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
            function escapeHtml(unsafe) {
                if (!unsafe) return '';
                return unsafe.replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;").replace(/'/g, "&#039;");
            }

            // –û–¢–†–ò–°–û–í–ö–ê –ö–ê–†–¢–û–ß–ï–ö –ú–ï–°–¢
            function renderPlaces() {
                const grid = document.getElementById('placesGrid');
                if (!grid) return;
                let html = '';
                PLACES.forEach(place => {
                    const rating = placeRatings[place.id] || { likes: 0, dislikes: 0 };
                    const netRating = rating.likes - rating.dislikes;
                    html += `<div class="place-card" data-place-id="${place.id}">
                        <div class="place-icon"><i class="${place.icon}"></i></div>
                        <div class="place-name">${place.name}<span class="place-rating"><i class="fas fa-star"></i> ${netRating}</span></div>
                        <div class="place-desc">${place.desc}</div>
                        <div class="place-tags">${place.tags.map(t => `<span class="tag">${t}</span>`).join('')}</div>
                        <div class="place-actions">
                            <div class="rating-buttons">
                                <button class="rate-btn like" data-place="${place.id}" data-type="like"><i class="fas fa-thumbs-up"></i> ${rating.likes}</button>
                                <button class="rate-btn dislike" data-place="${place.id}" data-type="dislike"><i class="fas fa-thumbs-down"></i> ${rating.dislikes}</button>
                            </div>
                            <span class="review-count"><i class="fas fa-comment"></i> ${posts.filter(p => p.placeId === place.id).length}</span>
                        </div>
                    </div>`;
                });
                grid.innerHTML = html;
                
                // –ù–ê–í–ï–®–ò–í–ê–ï–ú –°–û–ë–´–¢–ò–Ø –ù–ê –ö–ù–û–ü–ö–ò –õ–ê–ô–ö–û–í –ú–ï–°–¢
                document.querySelectorAll('.rate-btn').forEach(btn => {
                    btn.addEventListener('click', function(e) {
                        e.preventDefault();
                        e.stopPropagation();
                        const placeId = this.dataset.place;
                        const type = this.dataset.type;
                        if (!placeRatings[placeId]) placeRatings[placeId] = { likes: 0, dislikes: 0 };
                        if (type === 'like') placeRatings[placeId].likes += 1;
                        else placeRatings[placeId].dislikes += 1;
                        saveData();
                        renderPlaces();
                    });
                });
            }

            // –û–¢–†–ò–°–û–í–ö–ê –°–ï–õ–ï–ö–¢–ê
            function renderPlaceSelect() {
                const select = document.getElementById('placeSelect');
                if (!select) return;
                let options = '<option value="">‚Äî –í—ã–±–µ—Ä–∏—Ç–µ –∏–∑ —Å–ø–∏—Å–∫–∞ ‚Äî</option>';
                PLACES.forEach(p => { options += `<option value="${p.id}">${p.name}</option>`; });
                select.innerHTML = options;
            }

            // –û–¢–†–ò–°–û–í–ö–ê –õ–ï–ù–¢–´
            function renderFeed() {
                const feed = document.getElementById('postsFeed');
                if (!feed) return;
                let filtered = [...posts];
                if (currentFilter !== 'all') filtered = filtered.filter(p => p.type === currentFilter);
                filtered = filtered.reverse();

                if (filtered.length === 0) {
                    feed.innerHTML = `<div class="empty-feed"><i class="fas fa-leaf"></i><p>–ü–æ–∫–∞ –Ω–µ—Ç –∑–∞–ø–∏—Å–µ–π</p></div>`;
                    updateStats(); 
                    return;
                }

                let html = '';
                filtered.forEach(post => {
                    let placeName = '';
                    if (post.customPlace && post.customPlace.trim() !== '') {
                        placeName = post.customPlace;
                    } else {
                        const found = PLACES.find(p => p.id === post.placeId);
                        placeName = found ? found.name : '–ú–µ–¥–≤–µ–Ω—Å–∫–∏–π —Ä–∞–π–æ–Ω';
                    }
                    
                    const placeIcon = PLACES.find(p => p.id === post.placeId)?.icon || 'fas fa-map-marker-alt';
                    const typeIcon = post.type === 'story' ? 'üìñ' : 'üí¨';
                    const typeText = post.type === 'story' ? '–ò—Å—Ç–æ—Ä–∏—è' : '–û—Ç–∑—ã–≤';

                    html += `<div class="feed-item" data-post-id="${post.id}">
                        <div class="item-header">
                            <div class="item-author"><i class="fas fa-user-circle"></i> ${escapeHtml(post.author || '–ê–ù–û–ù–ò–ú')}</div>
                            <div style="display: flex; gap: 12px; flex-wrap: wrap;">
                                <span class="item-place-badge"><i class="${placeIcon}"></i> ${escapeHtml(placeName)}</span>
                                <span class="item-type">${typeIcon} ${typeText}</span>
                            </div>
                        </div>
                        <div class="item-content">${escapeHtml(post.content).replace(/\n/g, '<br>')}</div>`;

                    if (post.image) {
                        html += `<div class="post-image"><img src="${post.image}" alt="–§–æ—Ç–æ –ø–æ—Å—Ç–∞"></div>`;
                    }

                    html += `<div class="item-footer">
                        <div class="post-reactions">
                            <button class="reaction-btn like-btn" data-id="${post.id}" data-type="like"><i class="fas fa-thumbs-up"></i> <span class="like-count">${post.likes || 0}</span></button>
                            <button class="reaction-btn dislike-btn" data-id="${post.id}" data-type="dislike"><i class="fas fa-thumbs-down"></i> <span class="dislike-count">${post.dislikes || 0}</span></button>
                        </div>
                        <span class="item-date"><i class="far fa-calendar-alt"></i> ${escapeHtml(post.date || '‚Äî')}</span>
                    </div></div>`;
                });
                feed.innerHTML = html;

                // –ù–ê–í–ï–®–ò–í–ê–ï–ú –°–û–ë–´–¢–ò–Ø –ù–ê –õ–ê–ô–ö–ò –ü–û–°–¢–û–í ‚Äî –ò–°–ü–†–ê–í–õ–ï–ù–û!
                document.querySelectorAll('.reaction-btn').forEach(btn => {
                    btn.addEventListener('click', function(e) {
                        e.preventDefault();
                        e.stopPropagation();
                        const postId = this.dataset.id;
                        const type = this.dataset.type;
                        const post = posts.find(p => p.id === postId);
                        if (!post) return;
                        if (type === 'like') {
                            post.likes = (post.likes || 0) + 1;
                        }
                        if (type === 'dislike') {
                            post.dislikes = (post.dislikes || 0) + 1;
                        }
                        saveData();
                        renderFeed();
                        renderPlaces();
                    });
                });
                
                updateStats();
            }

            function updateStats() {
                document.getElementById('totalStoriesCount').innerText = posts.filter(p => p.type === 'story').length;
                document.getElementById('totalReviewsCount').innerText = posts.filter(p => p.type === 'review').length;
            }

            // –î–û–ë–ê–í–õ–ï–ù–ò–ï –ü–û–°–¢–ê
            function addPost(author, placeId, customPlace, type, content, imageBase64) {
                if (!content.trim()) { alert('–ù–∞–ø–∏—à–∏—Ç–µ —á—Ç–æ-–Ω–∏–±—É–¥—å!'); return false; }
                if (!author.trim()) author = '–ú–ï–î–í–ï–ù–ï–¶';

                const newPost = {
                    id: 'post-' + Date.now() + '-' + Math.random().toString(36).substring(2),
                    author: author.trim().toUpperCase(),
                    placeId: placeId || 'medvenka',
                    customPlace: customPlace ? customPlace.trim() : '',
                    type: type,
                    content: content.trim(),
                    date: new Date().toLocaleDateString('ru-RU', { day: 'numeric', month: 'long', year: 'numeric' }),
                    likes: 0,
                    dislikes: 0,
                    image: imageBase64 || null
                };

                posts.push(newPost);
                saveData();
                renderFeed();
                renderPlaces();
                return true;
            }

            let currentFilter = 'all';

            function init() {
                loadData();
                renderPlaceSelect();
                renderPlaces();
                renderFeed();

                // –ü–£–ë–õ–ò–ö–ê–¶–ò–Ø –ü–û–°–¢–ê
                document.getElementById('publishBtn').addEventListener('click', function() {
                    const author = document.getElementById('authorName').value;
                    const placeId = document.getElementById('placeSelect').value;
                    const customPlace = document.getElementById('customPlaceInput').value;
                    const type = document.querySelector('input[name="postType"]:checked')?.value || 'story';
                    const content = document.getElementById('postContent').value;
                    const fileInput = document.getElementById('imageInput');
                    const file = fileInput.files[0];

                    if (file && file.size > 5 * 1024 * 1024) {
                        alert('–§–∞–π–ª —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–æ–π (–º–∞–∫—Å. 5 –ú–ë)');
                        return;
                    }

                    if (file) {
                        const reader = new FileReader();
                        reader.onload = function(e) {
                            const success = addPost(author, placeId, customPlace, type, content, e.target.result);
                            if (success) {
                                document.getElementById('postContent').value = '';
                                document.getElementById('customPlaceInput').value = '';
                                document.getElementById('imageInput').value = '';
                            }
                        };
                        reader.readAsDataURL(file);
                    } else {
                        const success = addPost(author, placeId, customPlace, type, content, null);
                        if (success) {
                            document.getElementById('postContent').value = '';
                            document.getElementById('customPlaceInput').value = '';
                        }
                    }
                });

                // –§–ò–õ–¨–¢–†–´
                document.querySelectorAll('.filter-btn').forEach(btn => {
                    btn.addEventListener('click', function() {
                        document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
                        this.classList.add('active');
                        currentFilter = this.dataset.filter;
                        renderFeed();
                    });
                });
            }

            init();
        })();
    </script>
</body>
</html>
